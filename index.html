<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kart MasasÄ±</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <button id="btn-logout" onclick="cikisYap()">Masadan ayrÄ±l ğŸšª</button>

    <div id="secim-ekrani">
        <div class="giris-kapsayici">
            <div class="giris-sol">
                <h2 style="margin-bottom: 20px;">Masaya HoÅŸ Geldiniz</h2>
                <p style="color: #bdc3c7; font-size: 14px; margin-bottom: 25px; margin-top: 0;">
                    Ä°sminizi yazÄ±p oturmak istediÄŸiniz sandalyeyi seÃ§in.<br>
                    TÃ¼m oyuncular oturduÄŸunda oyun baÅŸlayacak.<br>
                    Keyifli oyunlar dileriz! ğŸƒ
                </p>
                <input type="text" id="oyuncu-isim-input" placeholder="Ä°sminizi YazÄ±n..." maxlength="12">
                
                <div class="oyun-modu-container">
                    <label for="oyun-modu-select">Oyun Tipi:</label>
                    <select id="oyun-modu-select" onchange="oyunModuDegistir(this.value)">
                        <option value="serbest">ğŸƒ Serbest Oyun</option>
                        <option value="king">ğŸ‘‘ King (YakÄ±nda)</option>
                    </select>
                </div>

                <div class="koltuk-btn-grup">
                    <button id="btn-sec-kuzey" class="koltuk-btn koltuk-bos" onclick="koltukSec(2)">Kuzey</button>
                    <button id="btn-sec-bati" class="koltuk-btn koltuk-bos" onclick="koltukSec(1)">BatÄ±</button>
                    <button id="btn-sec-dogu" class="koltuk-btn koltuk-bos" onclick="koltukSec(3)">DoÄŸu</button>
                    <button id="btn-sec-guney" class="koltuk-btn koltuk-bos" onclick="koltukSec(0)">GÃ¼ney</button>
                </div>
            </div>

            <div class="giris-sag">
                <h3>ğŸ“– Oyun Rehberi</h3>
                <div class="rehber-item">
                    <strong>ğŸƒ Serbest Mod Nedir?</strong>
                    <p>Kural yok! Ä°stediÄŸiniz kart oyununu oynayabilirsiniz. KartlarÄ± istediÄŸiniz gibi atabilir, geri alabilir ve masayÄ± yÃ¶netebilirsiniz. Ä°stenen oyuncu oyuna baÅŸlar ve kartlar saat yÃ¶nÃ¼nde atÄ±lmaya devam eder. Oyun sonunda oyuncularÄ±n topladÄ±ÄŸÄ± kartlar gÃ¶sterilir.</p>
                </div>
                <hr style="border-color: rgba(255,255,255,0.1);">
                <h4>ButonlarÄ±n AnlamlarÄ±</h4>
                <div class="rehber-buton-satir"><span class="ikon-kutusu mavi">âœ‹ Ben BaÅŸlÄ±yorum</span><span>Her el ilk kartÄ± atacak oyuncuyu belirler.</span></div>
                <div class="rehber-buton-satir"><span class="ikon-kutusu gri">VazgeÃ§ âœ–</span><span>"Ben BaÅŸlÄ±yorum" isteÄŸinizi iptal eder.</span></div>
                <div class="rehber-buton-satir"><span class="ikon-kutusu kirmizi-canli">Geri Al â†©</span><span>Son attÄ±ÄŸÄ±nÄ±z kartÄ± elinize geri alÄ±rsÄ±nÄ±z.</span></div>
                <div class="rehber-buton-satir"><span class="ikon-kutusu turuncu">OrtayÄ± Topla</span><span>Yerdeki kartlarÄ± toplar ve hanenize yazar.</span></div>
                <div class="rehber-buton-satir"><span class="ikon-kutusu kirmizi">OrtayÄ± Geri Koy â†º</span><span>OrtayÄ± yanlÄ±ÅŸlÄ±kla topladÄ±ysanÄ±z kartlarÄ± geri koyar.</span></div>
                <div class="rehber-buton-satir"><span class="ikon-kutusu yesil">Yeni El DaÄŸÄ±t â†»</span><span>Oyun sonunda eli bitirir ve yeniden daÄŸÄ±tÄ±r.</span></div>
                <div class="rehber-buton-satir"><span class="ikon-kutusu bordo">Masadan ayrÄ±l ğŸšª</span><span>Masadan kalkmanÄ±zÄ± saÄŸlar (Mevcut el sÄ±fÄ±rlanÄ±r).</span></div>
                <div style="margin-top: 20px; font-size: 12px; color: #bdc3c7; text-align: center;">v4.5 - Made with funğŸ¥³ by blokdokuz, 2026</div>
            </div>
        </div>
    </div>

    <div class="masa-cerceve">
        <div style="position: relative; width: 100%; height: 160px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
             <div id="kuzey-isim" class="isim-etiketi">KUZEY</div>
             <div id="kuzey-eli" class="el-yatay"></div>
             <div id="kuzey-toplanan" class="toplanan-alan yatay"></div>
        </div>

        <div class="masa-orta">
            <div style="position: relative; display: flex; flex-direction: row; align-items: center; height: 100%;">
                <div id="bati-isim" class="isim-etiketi">BATI</div>
                <div id="bati-eli" class="el-dikey"></div>
                <div id="bati-toplanan" class="toplanan-alan dikey"></div>
            </div>
            
            <div id="oyun-alani">
                <div class="yerdeki-yazi">Oyuncular Bekleniyor...</div>
                <button id="btn-dagit" onclick="yeniElDagit()" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 15px 30px; font-size: 16px; font-weight: bold; cursor: pointer; background: #27ae60; border: 2px solid white; color: white; border-radius: 8px; box-shadow: 0 0 15px rgba(0,0,0,0.5); z-index: 20;">YENÄ° EL DAÄIT â†»</button>
            </div>

            <div style="position: relative; display: flex; flex-direction: row; align-items: center; height: 100%;">
                <div id="dogu-toplanan" class="toplanan-alan dikey"></div>
                <div id="dogu-eli" class="el-dikey"></div>
                <div id="dogu-isim" class="isim-etiketi">DOÄU</div>
            </div>
        </div>

        <div style="position: relative; width: 100%; height: 160px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
            <div id="guney-toplanan" class="toplanan-alan yatay"></div>
            <div id="guney-eli" class="el-yatay"></div>
            <div id="guney-isim" class="isim-etiketi" style="display: none;">BEN</div>
            
            <div style="position: absolute; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 5px; z-index: 100;">
                <button id="btn-ilk-sira" onclick="ilkSiraIste()" style="display: none; padding: 10px 15px; font-size: 14px; cursor: pointer; background: #3498db; border: none; color: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); font-weight: bold;">âœ‹ Ben BaÅŸlÄ±yorum</button>
                <button id="btn-ilk-sira-iptal" onclick="ilkSiraIptal()" style="display: none; padding: 10px 15px; font-size: 14px; cursor: pointer; background: #7f8c8d; border: none; color: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">VazgeÃ§ âœ–</button>
                <button id="btn-geri" onclick="kartGeriAl()" style="display: none; padding: 8px 15px; font-size: 12px; cursor: pointer; background: #e74c3c; border: none; color: white; border-radius: 5px;">Geri Al â†©</button>
                <button id="btn-ortayi-geri" onclick="ortayiGeriKoy()" style="display: none; padding: 10px 15px; font-size: 14px; cursor: pointer; background: #d35400; border: none; color: white; border-radius: 5px; margin-bottom: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); font-weight: bold;">OrtayÄ± Geri Koy â†º</button>
                <button id="btn-topla" onclick="ortayiTopla()" style="padding: 10px 15px; font-size: 14px; cursor: pointer; background: #e67e22; border: none; color: white; border-radius: 5px;">OrtayÄ± Topla</button>
            </div>
        </div>
    </div>

    <div id="chat-box" class="chat-container chat-minimized">
        <div class="chat-header" onclick="chatBaslikTiklama()">
            <span class="chat-icon-btn" style="display:none;">ğŸ’¬</span>
            <span>ğŸ’¬ Sohbet</span>
            <div class="chat-header-buttons">
                <button id="chat-minimize-btn" onclick="chatMinimize(event)" title="Simge Durumuna KÃ¼Ã§Ã¼lt">_</button>
                <button id="chat-toggle-btn" onclick="chatToggle(event)" title="BÃ¼yÃ¼t/KÃ¼Ã§Ã¼lt">â¤¢</button>
            </div>
        </div>
        <div id="chat-messages" class="chat-messages">
            <div class="chat-welcome">Sohbete hoÅŸ geldiniz!</div>
        </div>
        
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Bir ÅŸeyler yaz..." maxlength="100">
            <button onclick="chatMesajGonder()">â¤</button>
        </div>
    </div>

    <div id="game-result-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-actions">
                <button id="btn-seat-select" class="end-btn cikis-modal-btn">Masadan AyrÄ±l</button>
                <button id="btn-redeal" class="end-btn deal-btn">KartlarÄ± DaÄŸÄ±t</button>
            </div>
            <h2 class="modal-title">Oyun Bitti - Toplanan Kartlar</h2>
            <div id="collected-cards-container" class="collected-container"></div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>